<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}ClÃ­nica{% endblock %}</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <style>
        body {
            min-height: 100vh;
        }

        .sidebar {
            width: 240px;
            min-height: 100vh;
            background-color: #f8f9fa;
            border-right: 1px solid #dee2e6;
        }

        .sidebar a {
            text-decoration: none;
            color: #333;
        }

        .sidebar a.nav-link.active {
            background-color: #e9ecef;
            font-weight: 500;
        }

        .sidebar a:hover {
            background-color: #e9ecef;
        }

        input[type="password"] {
            width: 100%;
            padding: 0.375rem 0.75rem;
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
        }
    </style>
</head>
<body>

<div class="d-flex">

    <!-- MENU LATERAL -->
    <aside class="sidebar p-3">

        <!-- CLÃNICA ATIVA -->
        <h5 class="mb-1">ğŸ¥ {{ clinica.nome }}</h5>
        <small class="text-muted">ClÃ­nica ativa</small>

        <!-- BARRA DE WHATSAPP -->
        {% if whatsapp_limite %}
            <div class="mt-3 mb-3">
                <small class="text-muted d-block mb-1">ğŸ“² WhatsApp</small>

                <div class="progress" style="height: 8px;">
                    <div class="progress-bar
                        {% if whatsapp_percentual >= 100 %}
                            bg-danger
                        {% elif whatsapp_percentual >= 80 %}
                            bg-warning
                        {% else %}
                            bg-success
                        {% endif %}"
                        style="width: {{ whatsapp_percentual }}%">
                    </div>
                </div>

                <small class="text-muted">
                    {{ whatsapp_usados }}/{{ whatsapp_limite }}
                </small>
            </div>
        {% else %}
            <small class="text-muted d-block mt-3 mb-3">
                ğŸ“² WhatsApp ilimitado
            </small>
        {% endif %}

        <!-- MENU -->
       <ul class="nav nav-pills flex-column gap-1">

            {# ğŸ  DASHBOARD #}
            {% if perms.agendamentos.ver_dashboard %}
            <li class="nav-item">
                <a href="{% url 'clinica_dashboard' %}" class="nav-link">
                    ğŸ  Dashboard
                </a>
            </li>
            {% endif %}

            {# ğŸ“… AGENDAMENTOS / DISPONIBILIDADES #}
            {% if perms.agendamentos.gerenciar_agendamentos %}
            <li class="nav-item">
                <a href="{% url 'disponibilidade_list' %}" class="nav-link">
                    ğŸ“… Disponibilidades
                </a>
            </li>
            {% endif %}
            <li class="nav-item">
                <a href="{% url 'agenda_semana' %}" class="nav-link">
                    ğŸ“† Agendamentos da semana
                </a>
            </li>
        
    

            {# ğŸ¦· SERVIÃ‡OS #}
            {% if perms.agendamentos.gerenciar_servicos %}
            <li class="nav-item">
                <a href="{% url 'servico_list' %}" class="nav-link">
                    ğŸ¦· ServiÃ§os
                </a>
            </li>
            {% endif %}

            {# ğŸ‘©â€âš•ï¸ PROFISSIONAIS #}
            {% if perms.agendamentos.gerenciar_profissionais %}
            <li class="nav-item">
                <a href="{% url 'profissional_list' %}" class="nav-link">
                    ğŸ‘©â€âš•ï¸ Profissionais
                </a>
            </li>
            {% endif %}

            {# ğŸ“Š RELATÃ“RIOS #}
            {% if perms.agendamentos.ver_relatorios %}
            <li class="nav-item">
                <a href="{% url 'relatorio_agendamentos_html' %}" class="nav-link">
                    ğŸ“Š RelatÃ³rios
                </a>
            </li>
            {% endif %}

            <hr class="my-3">

            {# ğŸ’³ PLANOS â€” SOMENTE ADMINISTRADOR #}
            {% if perms.agendamentos.gerenciar_profissionais %}
            <li class="nav-item">
                <a href="{% url 'planos' %}" class="nav-link">
                    ğŸ’³ Planos
                </a>
            </li>
            {% endif %}

            {# ğŸ‘¤ MINHA CONTA (todos logados) #}
            <li class="nav-item">
                <a href="{% url 'minha_conta' %}" class="nav-link">
                    ğŸ‘¤ Minha Conta
                </a>
            </li>

            {# ğŸšª SAIR #}
            <li class="nav-item mt-2">
                <form action="{% url 'clinica_logout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="nav-link text-danger btn btn-link p-0">
                        ğŸšª Sair
                    </button>
                </form>
            </li>

        </ul>
    </aside>

    <!-- CONTEÃšDO PRINCIPAL -->
    <main class="flex-grow-1 p-4 bg-light">
        {% block content %}{% endblock %}
    </main>

</div>

</body>
</html>
